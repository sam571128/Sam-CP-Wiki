---
description: 就算有很多種操作，線段樹一樣能搞定！
---

# 多種操作的懶惰標記

這裡需要用到區間修改與懶惰標記的概念，若尚未學過，請點選以下連結

{% page-ref page="segment-tree-3.md" %}

### 區間加值、區間賦值

之前已經學過只有單個操作的線段樹了，那麼如果今天題目同時要求兩種操作呢？

聰明的你一定想到了！就是開兩種「懶惰標記」，並且在下推標記時，同時去維護這兩種操作。

不過這個問題難的地方在，究竟該如何實作呢？

### 操作的順序？

在實作的時候，正常來說會遇到的最大問題在於「操作順序」亂了

當我們「先加值、後賦值」時，在下推時，我們必須要先執行「加值」的動作，再去執行「賦值」的動作，亦即加值的動作會被賦值蓋過。而在相反的情況「先賦值、後加值」時，整個區間必須是先修改完答案之後才做加值的動作。

大致寫法如下

